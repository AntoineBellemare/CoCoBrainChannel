#N canvas 603 48 1197 763 10;
#N canvas 0 50 801 501 curve_test 1;
#X floatatom 351 374 0 0 0 0 - - -;
#N canvas 733 434 415 309 Roughness 0;
#X text 193 50 amp-list;
#X text 71 50 freq-list;
#X obj 77 67 inlet;
#X obj 203 67 inlet;
#X obj 89 248 outlet;
#X text 207 139 Amp;
#X text 109 140 Hz;
#N canvas 355 179 536 307 Parncutt 0;
#X obj 36 22 inlet;
#X obj 60 205 expr pow((4*2.71828*$f1)/ pow(2.71828 \, 4*$f1) \, 2)
;
#X obj 60 121 -;
#X obj 60 231 outlet;
#X obj 60 143 abs;
#X text 105 225 Roughness estimation according to Plomp & Levelt (1965)
\, for equally loud pure tones in barks;
#X msg 135 183 0;
#N canvas 146 157 926 353 hztobark 0;
#X obj 62 24 inlet;
#X obj 61 137 expr 13.3*atan(3*$f1/4000);
#X obj 150 83 expr ((26.81*$f1)/(1960+$f1))-0.53;
#X obj 62 54 moses 219.501;
#X obj 150 109 expr if ($f1>20.1 \, $f1+(0.22*($f1-20.1)) \, $f1);
#X obj 114 166 outlet;
#X text 40 1 "HzToCbrz";
#X text 51 214 Clarence's Combination of Terhardt (1979) & Traunmuller
(1990) (MusiQuantics Book);
#X obj 482 30 inlet;
#X obj 481 143 expr 13.3*atan(3*$f1/4000);
#X obj 570 89 expr ((26.81*$f1)/(1960+$f1))-0.53;
#X obj 482 60 moses 219.501;
#X obj 570 115 expr if ($f1>20.1 \, $f1+(0.22*($f1-20.1)) \, $f1);
#X obj 534 172 outlet;
#X text 460 7 "HzToCbrz";
#X text 471 220 Clarence's Combination of Terhardt (1979) & Traunmuller
(1990) (MusiQuantics Book);
#X connect 0 0 3 0;
#X connect 1 0 5 0;
#X connect 2 0 4 0;
#X connect 3 0 1 0;
#X connect 3 1 2 0;
#X connect 4 0 5 0;
#X connect 8 0 11 0;
#X connect 9 0 13 0;
#X connect 10 0 12 0;
#X connect 11 0 9 0;
#X connect 11 1 10 0;
#X connect 12 0 13 0;
#X restore 36 88 pd hztobark;
#X text 100 126 Parncutt's Aproximation (1993) of Plomp & Levelt's
Curve (1965).;
#X obj 60 163 moses 10.2;
#X obj 36 57 unpack;
#X connect 0 0 10 0;
#X connect 1 0 3 0;
#X connect 2 0 4 0;
#X connect 4 0 9 0;
#X connect 6 0 3 0;
#X connect 7 0 2 0;
#X connect 7 1 2 1;
#X connect 9 0 1 0;
#X connect 9 1 6 0;
#X connect 10 0 7 0;
#X connect 10 1 7 1;
#X restore 104 160 pd Parncutt;
#N canvas 450 163 618 601 Split-in-Pairs 0;
#X text 329 22 amp-list;
#X text 174 22 freq-list;
#X obj 174 48 inlet;
#X obj 329 48 inlet;
#X obj 174 203 until;
#X obj 244 470 list store;
#X obj 174 231 f;
#X obj 207 231 + 1;
#X msg 215 203 0;
#X msg 244 357 get \$1 1;
#X obj 174 178 t f b;
#X obj 223 529 pack;
#X obj 108 357 until;
#X obj 108 470 list store;
#X obj 108 385 f;
#X obj 140 385 + 1;
#X msg 108 444 get \$1 1;
#X obj 142 327 t b b;
#X obj 169 357 f 1;
#X obj 202 357 + 1;
#X msg 184 327 1;
#X obj 301 435 r \$0-freqs;
#X obj 174 74 t l l b;
#X obj 228 74 s \$0-init;
#X obj 184 305 r \$0-init;
#X obj 193 101 s \$0-freqs;
#X obj 174 129 list length;
#X obj 439 424 list store;
#X msg 439 341 get \$1 1;
#X obj 418 483 pack;
#X obj 373 394 list store;
#X msg 373 368 get \$1 1;
#X obj 329 76 s \$0-amps;
#X obj 496 387 r \$0-amps;
#X obj 108 411 t f f;
#X obj 174 260 trigger bang float float;
#X obj 418 564 outlet;
#X obj 223 564 outlet;
#X obj 174 152 - 1;
#X connect 2 0 22 0;
#X connect 3 0 32 0;
#X connect 4 0 6 0;
#X connect 5 0 11 1;
#X connect 6 0 7 0;
#X connect 6 0 35 0;
#X connect 7 0 6 1;
#X connect 8 0 6 1;
#X connect 9 0 5 0;
#X connect 10 0 4 0;
#X connect 10 1 8 0;
#X connect 11 0 37 0;
#X connect 12 0 14 0;
#X connect 13 0 11 0;
#X connect 13 1 12 1;
#X connect 14 0 15 0;
#X connect 14 0 34 0;
#X connect 15 0 14 1;
#X connect 16 0 13 0;
#X connect 17 0 12 0;
#X connect 17 1 18 0;
#X connect 18 0 14 1;
#X connect 18 0 19 0;
#X connect 19 0 18 1;
#X connect 20 0 18 1;
#X connect 21 0 5 1;
#X connect 21 0 13 1;
#X connect 22 0 26 0;
#X connect 22 1 25 0;
#X connect 22 2 23 0;
#X connect 24 0 20 0;
#X connect 26 0 38 0;
#X connect 27 0 29 1;
#X connect 28 0 27 0;
#X connect 29 0 36 0;
#X connect 30 0 29 0;
#X connect 31 0 30 0;
#X connect 33 0 27 1;
#X connect 33 0 30 1;
#X connect 34 0 16 0;
#X connect 34 1 31 0;
#X connect 35 0 17 0;
#X connect 35 1 9 0;
#X connect 35 2 28 0;
#X connect 38 0 10 0;
#X restore 104 122 pd Split-in-Pairs;
#X obj 89 215 f;
#X obj 77 95 t b l;
#N canvas 849 553 261 216 multiply&sum 0;
#X obj 67 48 inlet;
#X obj 109 48 inlet;
#X obj 94 83 *;
#X obj 128 125 f;
#X obj 94 124 +;
#X obj 94 156 outlet;
#X msg 127 99 0;
#X obj 127 79 r \$0-init;
#X connect 0 0 2 0;
#X connect 1 0 2 1;
#X connect 2 0 4 0;
#X connect 3 0 4 1;
#X connect 4 0 3 0;
#X connect 4 0 5 0;
#X connect 6 0 4 1;
#X connect 7 0 6 0;
#X restore 104 187 pd multiply&sum;
#N canvas 441 149 483 307 Vassilakis 0;
#X obj 83 237 outlet;
#X text 212 163 Vassilakis;
#X obj 83 170 min;
#X obj 410 169 max;
#X obj 83 39 inlet;
#X obj 83 192 expr pow(($f1*$f2) \, 0.1)*pow(((2*$f1)/($f1+$f2)) \,
3.11);
#X obj 83 98 t f f;
#X obj 83 72 unpack float float;
#X connect 2 0 5 0;
#X connect 3 0 5 1;
#X connect 4 0 7 0;
#X connect 5 0 0 0;
#X connect 6 0 2 0;
#X connect 6 1 3 0;
#X connect 7 0 6 0;
#X connect 7 1 2 1;
#X connect 7 1 3 1;
#X restore 203 159 pd Vassilakis;
#X connect 2 0 10 0;
#X connect 3 0 8 1;
#X connect 7 0 11 0;
#X connect 8 0 7 0;
#X connect 8 1 12 0;
#X connect 9 0 4 0;
#X connect 10 0 9 0;
#X connect 10 1 8 0;
#X connect 11 0 9 1;
#X connect 12 0 11 1;
#X restore 351 344 pd Roughness;
#X msg 351 257 100 200 300 400;
#X msg 457 257 1 0.5 0.25 0.1;
#X obj 172 132 inlet;
#X obj 217 132 inlet;
#X obj 172 318 outlet;
#N canvas 433 87 373 491 scale 0;
#X obj 152 224 -;
#X obj 125 101 pack float float;
#X obj 218 58 inlet;
#X obj 125 186 t f f;
#X obj 152 271 change;
#X obj 125 127 swap;
#X obj 152 426 outlet;
#X msg 184 196 0;
#X obj 152 294 sel -1 1;
#X obj 125 55 inlet;
#X obj 152 385 list store;
#X msg 152 348 append \$1;
#X text 203 428 Scale;
#X obj 152 247 expr $f1/abs($f1);
#X obj 152 323 v cents;
#X obj 146 151 v cents;
#X obj 82 348 r \$0-done;
#X text 183 224 roughness diference;
#X text 124 34 Cents;
#X text 220 35 Roughness;
#X obj 185 175 r \$0-init;
#X obj 223 353 r \$0-init;
#X connect 0 0 13 0;
#X connect 1 0 5 0;
#X connect 2 0 1 1;
#X connect 3 0 0 1;
#X connect 3 1 0 0;
#X connect 4 0 8 0;
#X connect 5 0 3 0;
#X connect 5 1 15 0;
#X connect 7 0 0 1;
#X connect 7 0 4 0;
#X connect 8 0 14 0;
#X connect 8 1 14 0;
#X connect 9 0 1 0;
#X connect 10 0 6 0;
#X connect 11 0 10 0;
#X connect 13 0 4 0;
#X connect 14 0 11 0;
#X connect 16 0 10 0;
#X connect 20 0 7 0;
#X connect 21 0 10 1;
#X restore 172 230 pd scale;
#X text 119 195 cents;
#X text 175 113 freq;
#X text 221 111 amp;
#X obj 285 428 outlet;
#X obj 287 131 inlet;
#N canvas 467 23 635 720 curve 1;
#X obj 369 538 list append;
#X obj 190 193 until;
#X obj 504 540 list append;
#X obj 163 75 inlet;
#X obj 525 75 inlet;
#X text 147 52 frequencies;
#X text 507 52 amplitudes;
#X obj 369 584 outlet;
#X obj 504 583 outlet;
#X obj 217 587 outlet;
#X obj 504 484 trigger l l;
#X obj 369 392 trigger bang float bang;
#X msg 232 192 0;
#X obj 217 219 f;
#X text 376 370 Ratios;
#X obj 163 119 trigger bang bang list bang;
#X obj 369 458 list;
#X obj 504 460 list;
#X obj 163 171 t b f;
#X obj 150 241 s \$0-done;
#N canvas 692 156 375 353 list-mul 0;
#X obj 84 47 inlet;
#X obj 148 165 *;
#X obj 166 47 inlet;
#X obj 148 240 list store, f 12;
#X msg 148 200 append \$1;
#X obj 84 87 trigger bang list bang;
#X obj 148 275 outlet;
#N canvas 353 233 299 282 drip 0;
#X obj 81 101 until;
#X obj 94 184 list store;
#X obj 112 68 t b b l;
#X obj 81 126 f;
#X obj 119 127 + 1;
#X msg 131 101 0, f 2;
#X msg 81 158 get \$1 1;
#X obj 112 36 inlet;
#X obj 94 214 outlet;
#X connect 0 0 3 0;
#X connect 1 0 8 0;
#X connect 1 1 0 1;
#X connect 2 0 0 0;
#X connect 2 1 5 0;
#X connect 2 2 1 1;
#X connect 3 0 4 0;
#X connect 3 0 6 0;
#X connect 4 0 3 1;
#X connect 5 0 3 1;
#X connect 6 0 1 0;
#X connect 7 0 2 0;
#X restore 148 128 pd drip;
#X connect 0 0 5 0;
#X connect 1 0 4 0;
#X connect 2 0 1 1;
#X connect 3 0 6 0;
#X connect 4 0 3 0;
#X connect 5 0 3 0;
#X connect 5 1 7 0;
#X connect 5 2 3 1;
#X connect 7 0 1 0;
#X restore 396 509 pd list-mul;
#X obj 369 485 t l l;
#X text 275 219 <= Step;
#X text 456 171 <= Step;
#X text 507 606 Duplicated amplitude list, f 11;
#X text 341 611 Frequency list + shifted frequency list, f 17;
#N canvas 523 256 435 304 ratio 0;
#X obj 208 200 outlet;
#X obj 78 69 inlet;
#X text 186 218 interval in freq;
#X obj 222 74 inlet;
#X text 252 112 cents to ratio;
#X obj 223 131 expr pow(2 \, $f1/1200);
#X obj 208 174 /;
#X text 34 134 ratio;
#X text 228 48 interval start;
#X obj 78 130 expr pow(2 \, $f1/1200);
#X text 80 45 cents;
#X connect 1 0 9 0;
#X connect 3 0 5 0;
#X connect 5 0 6 1;
#X connect 6 0 0 0;
#X connect 9 0 6 0;
#X restore 369 347 pd ratio;
#X obj 217 271 t f f;
#X text 49 145 Range in cents =>;
#X obj 250 219 + 1;
#X text 174 586 Cents;
#X obj 414 169 * -1;
#X text 449 105 interval start in cents, f 9;
#X obj 163 145 f \$1;
#X obj 414 113 f \$2;
#X obj 321 159 s \$0-init;
#X connect 0 0 7 0;
#X connect 1 0 13 0;
#X connect 2 0 8 0;
#X connect 3 0 15 0;
#X connect 4 0 17 1;
#X connect 10 0 2 0;
#X connect 10 1 2 1;
#X connect 11 0 16 0;
#X connect 11 1 20 1;
#X connect 11 2 17 0;
#X connect 12 0 13 1;
#X connect 13 0 27 0;
#X connect 13 0 29 0;
#X connect 15 0 33 0;
#X connect 15 1 12 0;
#X connect 15 2 16 1;
#X connect 15 3 34 0;
#X connect 15 3 35 0;
#X connect 16 0 21 0;
#X connect 17 0 10 0;
#X connect 18 0 19 0;
#X connect 18 1 1 0;
#X connect 20 0 0 1;
#X connect 21 0 0 0;
#X connect 21 1 20 0;
#X connect 26 0 11 0;
#X connect 27 0 9 0;
#X connect 27 1 26 0;
#X connect 29 0 13 1;
#X connect 31 0 26 1;
#X connect 33 0 18 0;
#X connect 34 0 31 0;
#X restore 172 171 pd curve;
#N canvas 407 263 323 250 list 0;
#X obj 100 49 inlet;
#X obj 100 116 list store;
#X msg 100 89 append \$1 \, bang;
#X obj 100 181 outlet;
#X obj 100 143 list split \$1;
#X connect 0 0 2 0;
#X connect 1 0 4 0;
#X connect 2 0 1 0;
#X connect 4 0 3 0;
#X connect 4 1 1 1;
#X restore 285 385 pd list;
#X connect 0 0 14 0;
#X connect 1 0 0 0;
#X connect 2 0 1 0;
#X connect 3 0 1 1;
#X connect 4 0 13 0;
#X connect 5 0 13 1;
#X connect 7 0 6 0;
#X connect 12 0 1 0;
#X connect 13 0 7 0;
#X connect 13 1 1 0;
#X connect 13 2 1 1;
#X connect 14 0 11 0;
#X restore 123 424 pd curve_test;
#X obj 482 24 cnv 15 511 598 empty empty empty 20 12 0 14 -228856 -66577
0;
#N canvas 0 22 1387 856 (subpatch) 0;
#X array Curva 1250 float 0;
#X coords 0 0 1251 0 512 600 1;
#X restore 481 23 graph;
#X msg 144 345 500 1000 1500 2000;
#X msg 175 382 0.9 0.8 0.4 0.3;
#X msg 129 318 100 200 300 400;
#X text 438 625 Cents;
#X text 476 626 0;
#X text 510 626 100;
#X text 551 626 200;
#X text 592 626 300;
#X text 633 626 400;
#X text 674 626 500;
#X text 715 626 600;
#X text 756 626 700;
#X text 797 626 800;
#X text 838 626 900;
#X text 876 626 1000;
#X text 917 626 1100;
#X text 958 626 1200;
#N canvas 451 23 280 240 freq-amps 0;
#X obj 120 52 inlet;
#X obj 167 190 outlet;
#X obj 99 189 outlet;
#X obj 68 119 t b b;
#X obj 68 87 bng 15 250 50 0 empty \$0-Go! empty 17 7 0 10 -228856
-1 -1;
#X obj 99 155 list;
#X obj 167 154 list;
#X obj 68 52 inlet;
#N canvas 240 57 348 317 get-lists 0;
#X obj 205 86 sel 0;
#X obj 94 219 list store;
#X msg 94 183 append \$1;
#X obj 178 219 list store;
#X msg 178 183 append \$1;
#X obj 205 114 t b b b;
#X msg 95 103 \$2;
#X msg 142 103 \$3;
#X obj 142 59 trigger l f;
#X obj 142 35 inlet;
#X obj 178 250 outlet;
#X obj 94 250 outlet;
#X connect 0 0 5 0;
#X connect 1 0 11 0;
#X connect 2 0 1 0;
#X connect 3 0 10 0;
#X connect 4 0 3 0;
#X connect 5 0 1 1;
#X connect 5 0 3 1;
#X connect 5 1 1 0;
#X connect 5 2 3 0;
#X connect 6 0 2 0;
#X connect 7 0 4 0;
#X connect 8 0 7 0;
#X connect 8 0 6 0;
#X connect 8 1 0 0;
#X connect 9 0 8 0;
#X restore 120 88 pd get-lists;
#X connect 0 0 8 0;
#X connect 3 0 5 0;
#X connect 3 1 6 0;
#X connect 4 0 3 0;
#X connect 5 0 2 0;
#X connect 6 0 1 0;
#X connect 7 0 4 0;
#X connect 8 0 5 1;
#X connect 8 1 6 1;
#X restore 35 361 pd freq-amps;
#X floatatom 104 187 5 0 0 0 - - -;
#X floatatom 38 213 5 4 50 0 - - -;
#X msg 38 234 npeak \$1;
#X obj 104 210 sig~ 300;
#X obj 104 279 sigmund~ -npts 2048 -hop 1024 -npeak 10 peaks;
#X obj 35 325 bng 17 250 50 0 empty empty empty 17 7 0 10 -228856 -1
-1;
#X text 29 305 Do it;
#X obj 104 234 phasor~;
#X obj 129 471 print Scale;
#X obj 104 258 expr~ $v1*2-1;
#N canvas 397 149 458 491 set-table 1;
#X obj 90 53 inlet;
#X obj 196 253 array set Curva;
#X obj 196 286 array max Curva;
#X obj 90 286 array min Curva;
#X msg 175 381 \; Curva bounds 0 \$2 1251 \$1;
#X floatatom 154 318 5 0 0 0 - - -;
#X floatatom 196 318 5 0 0 0 - - -;
#X obj 175 343 pack;
#X obj 252 326 loadbang;
#X msg 252 349 1 0;
#X obj 271 179 list length;
#X obj 90 178 trigger bang bang list list;
#X obj 271 210 array size Curva;
#X connect 0 0 11 0;
#X connect 2 0 6 0;
#X connect 3 0 5 0;
#X connect 5 0 7 0;
#X connect 6 0 7 1;
#X connect 7 0 4 0;
#X connect 8 0 9 0;
#X connect 9 0 4 0;
#X connect 10 0 12 0;
#X connect 11 0 3 0;
#X connect 11 1 2 0;
#X connect 11 2 1 0;
#X connect 11 3 10 0;
#X restore 222 469 pd set-table;
#X text 98 42 Generate roughness curves and spectrum's scale;
#X text 236 416 <= range in cents and start interval;
#X obj 250 186 loadbang;
#X msg 250 219 \; pd dsp 1;
#X text 100 68 This is an abstraction that uses the [roughness] external.
, f 48;
#X obj 321 375 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 333 339 print;
#X connect 0 0 29 0;
#X connect 0 1 31 0;
#X connect 3 0 0 0;
#X connect 4 0 0 1;
#X connect 5 0 0 0;
#X connect 20 0 0 0;
#X connect 20 1 0 1;
#X connect 21 0 24 0;
#X connect 22 0 23 0;
#X connect 23 0 25 0;
#X connect 24 0 28 0;
#X connect 25 0 20 1;
#X connect 26 0 20 0;
#X connect 28 0 30 0;
#X connect 30 0 25 0;
#X connect 34 0 35 0;
#X connect 37 0 5 0;
#X connect 37 0 4 0;
